# AFC Hardware Configuration for ACE System
#
# This file contains configuration for:
# - Extruder (toolhead) sensors
# - Buffer/TurtleNeck (optional)
#
# Include this file in your printer.cfg after AFC_ACE_1.cfg

# ============================================
# Extruder Configuration
# ============================================
# The extruder section defines sensors in the toolhead
# These sensors detect when filament enters/exits the extruder

[AFC_extruder extruder]
# Sensor before extruder gears (tool start sensor)
pin_tool_start: ^!<toolhead_sensor_start_pin>
# Sensor after extruder gears (tool end sensor)
pin_tool_end: ^!<toolhead_sensor_end_pin>

# Distance from tool end sensor to nozzle tip (mm)
tool_stn: 45

# Loading speeds
tool_load_speed: 10                     # Speed when loading into extruder (mm/s)
tool_unload_speed: 10                   # Speed when unloading from extruder (mm/s)

# Enable sensor visibility in GUI
enable_sensors_in_gui: True

# ============================================
# Buffer Configuration (Optional)
# ============================================
# IMPORTANT FOR AFC_ACE USERS:
# --------------------------------------------
# AFC_ACE has BUILT-IN tension sensors (TENSION1-4) on each lane.
# You should use AFC_ACE_tension instead of TurtleNeck buffer!
#
# AFC_ACE_tension (configured in AFC_ACE_1.cfg):
# - Uses your existing Hall effect tension sensors
# - Active mode: Feeds filament when tension detected
# - Passive mode: Free filament movement
# - NO additional hardware needed
#
# TurtleNeck Buffer (below) is ONLY for:
# - SEPARATE physical TurtleNeck buffer device
# - ADDITIONAL advance/trailing sensors (not TENSION sensors)
# - Different working principle (rotation_distance adjustment)
#
# For AFC_ACE: Use AFC_ACE_tension, NOT TurtleNeck!
# ============================================

# Uncomment ONLY if you have a SEPARATE TurtleNeck buffer device
# [AFC_buffer TurtleNeck]
# advance_pin: ^!<buffer_advance_pin>      # Separate advance sensor (not ACE TENSION sensor!)
# trailing_pin: ^!<buffer_trailing_pin>    # Separate trailing sensor (not ACE TENSION sensor!)
# multiplier_high: 1.05                    # Speed multiplier when buffer needs more filament
# multiplier_low: 0.95                     # Speed multiplier when buffer has too much filament
# enable_sensors_in_gui: True

# ============================================
# Example Pinout (replace with your actual pins)
# ============================================
# For toolhead connected via CAN:
# [AFC_extruder extruder]
# pin_tool_start: ^!toolhead:PB7
# pin_tool_end: ^!toolhead:PB8
#
# For SEPARATE TurtleNeck buffer device (not ACE built-in sensors):
# [AFC_buffer TurtleNeck]
# advance_pin: ^!ACE:SPARE1          # NOT the TENSION sensor pins!
# trailing_pin: ^!ACE:SPARE2         # NOT the TENSION sensor pins!

# ============================================
# Notes on Setup
# ============================================
# 1. Tool sensors (REQUIRED):
#    - pin_tool_start should trigger when filament first enters the toolhead
#    - pin_tool_end should trigger when filament reaches the extruder gears
#    - Adjust tool_stn to match your hotend geometry
#
# 2. AFC_ACE Tension Assist (RECOMMENDED for ACE):
#    - Configure in AFC_ACE_1.cfg, not here
#    - Uses built-in TENSION1-4 sensors
#    - No additional hardware needed
#    - See AFC_ACE_1.cfg for configuration examples
#
# 3. TurtleNeck Buffer (ONLY if you have separate buffer device):
#    - Requires ADDITIONAL sensors (not TENSION1-4)
#    - Requires physical buffer mechanism
#    - Most AFC_ACE users don't need this
#
# 4. Sensor polarity:
#    - Use ^! for pullup with inverted logic
#    - Use ^ for pullup without inversion
#    - Adjust based on your sensor type (optical, mechanical, etc.)
